From 532560a989ec103d6cbfa84a7df8be8815a4b831 Mon Sep 17 00:00:00 2001
From: Ray Donnelly <mingw.android@gmail.com>
Date: Mon, 16 Dec 2013 19:43:40 +0000
Subject: [PATCH 15/15] MinGW-w64: Create ${CT_SYSROOT_DIR}/mingw/include

.. if it doesn't exist before building GCC as otherwise
the build will deliberately fail.
---
 scripts/build/cc/100-gcc.sh | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/scripts/build/cc/100-gcc.sh b/scripts/build/cc/100-gcc.sh
index 26ffc7f..ce92937 100644
--- a/scripts/build/cc/100-gcc.sh
+++ b/scripts/build/cc/100-gcc.sh
@@ -393,6 +393,18 @@ do_gcc_core_backend() {
         extra_config+=("--with-lipo=${CT_PREFIX_DIR}/bin/${CT_TARGET}-lipo${exeext}")
     fi
 
+    if [ ! "${CT_TARGET/mingw/}" = "${CT_TARGET}" -o ! "${CT_TARGET/cygwin/}" = "${CT_TARGET}" ]; then
+        # This folder must exist otherwise you get an error:
+        # The directory that should contain system headers does not exist:
+        # ${CT_SYSROOT_DIR}/mingw/include
+        # Linux will create this somewhere else, and also, may want to use
+        # mingw32 and mingw64 as MinGW-w64 itself does now-a-days so until
+        # I decide on these issues this workaround will suffice.
+        if [ ! -d ${CT_SYSROOT_DIR}/mingw/include ]; then
+            CT_DoExecLog ALL mkdir -p ${CT_SYSROOT_DIR}/mingw/include
+        fi
+    fi
+
     CT_DoLog DEBUG "Extra config passed: '${extra_config[*]}'"
 
     # Use --with-local-prefix so older gccs don't look in /usr/local (http://gcc.gnu.org/PR10532)
-- 
1.8.5.1

